  #!/bin/bash
  # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¿Ð¾ Ð»Ð¾Ð³Ð°Ð¼
  # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚: awk, sed, jq, grep

  LINES=${1:-100}

  echo "========================================"
  echo "  LOG STATISTICS REPORT"
  echo "  $(date '+%Y-%m-%d %H:%M:%S')"
  echo "========================================"
  echo ""

  echo "ðŸ“¦ CONTAINERS:"
  docker ps --format '{{json .}}' | jq -r '"   \(.Names): \(.Status)"'
  echo ""

  echo "ðŸ“Š HTTP CODES (last $LINES requests):"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk '{codes[$9]++} END {for(c in codes) if(c~/^[0-9]/) printf "   %s: %d\n", c, codes[c]}' | sort
  echo ""

  echo "ðŸ”¥ TOP-5 ERRORS:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    grep -E "4[0-9]{2}|5[0-9]{2}" | \
    awk '{print $7, $9}' | sort | uniq -c | sort -rn | head -5 | \
    awk '{printf "   %s %s - %d times\n", $2, $3, $1}'
  echo ""

  echo "ðŸŒ UNIQUE IPs:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk -F'[ :]' '{print $4}' | sort -u | wc -l | \
    awk '{printf "   %d unique IPs\n", $1}'
  echo ""
  echo "========================================"  #!/bin/bash
  # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¿Ð¾ Ð»Ð¾Ð³Ð°Ð¼
  # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚: awk, sed, jq, grep

  LINES=${1:-100}

  echo "========================================"
  echo "  LOG STATISTICS REPORT"
  echo "  $(date '+%Y-%m-%d %H:%M:%S')"
  echo "========================================"
  echo ""

  echo "ðŸ“¦ CONTAINERS:"
  docker ps --format '{{json .}}' | jq -r '"   \(.Names): \(.Status)"'
  echo ""

  echo "ðŸ“Š HTTP CODES (last $LINES requests):"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk '{codes[$9]++} END {for(c in codes) if(c~/^[0-9]/) printf "   %s: %d\n", c, codes[c]}' | sort
  echo ""

  echo "ðŸ”¥ TOP-5 ERRORS:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    grep -E "4[0-9]{2}|5[0-9]{2}" | \
    awk '{print $7, $9}' | sort | uniq -c | sort -rn | head -5 | \
    awk '{printf "   %s %s - %d times\n", $2, $3, $1}'
  echo ""

  echo "ðŸŒ UNIQUE IPs:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk -F'[ :]' '{print $4}' | sort -u | wc -l | \
    awk '{printf "   %d unique IPs\n", $1}'
  echo ""
  echo "========================================"  #!/bin/bash
  # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¿Ð¾ Ð»Ð¾Ð³Ð°Ð¼
  # Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚: awk, sed, jq, grep

  LINES=${1:-100}

  echo "========================================"
  echo "  LOG STATISTICS REPORT"
  echo "  $(date '+%Y-%m-%d %H:%M:%S')"
  echo "========================================"
  echo ""

  echo "ðŸ“¦ CONTAINERS:"
  docker ps --format '{{json .}}' | jq -r '"   \(.Names): \(.Status)"'
  echo ""

  echo "ðŸ“Š HTTP CODES (last $LINES requests):"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk '{codes[$9]++} END {for(c in codes) if(c~/^[0-9]/) printf "   %s: %d\n", c, codes[c]}' | sort
  echo ""

  echo "ðŸ”¥ TOP-5 ERRORS:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    grep -E "4[0-9]{2}|5[0-9]{2}" | \
    awk '{print $7, $9}' | sort | uniq -c | sort -rn | head -5 | \
    awk '{printf "   %s %s - %d times\n", $2, $3, $1}'
  echo ""

  echo "ðŸŒ UNIQUE IPs:"
  docker-compose logs --tail=$LINES backend 2>/dev/null | \
    awk -F'[ :]' '{print $4}' | sort -u | wc -l | \
    awk '{printf "   %d unique IPs\n", $1}'
  echo ""
  echo "========================================"
